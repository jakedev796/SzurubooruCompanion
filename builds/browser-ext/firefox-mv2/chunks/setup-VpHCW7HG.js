import{s as o}from"./api-DwePz4_c.js";document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("baseUrl"),s=document.getElementById("testConnection"),t=document.getElementById("msg");s.addEventListener("click",async()=>{const n=a.value.trim().replace(/\/+$/,"");if(!n){t.textContent="Backend URL is required.",t.className="msg err";return}try{if(!new URL(n).protocol.match(/^https?:$/)){t.textContent="URL must start with http:// or https://",t.className="msg err";return}}catch{t.textContent="Invalid URL format.",t.className="msg err";return}s.disabled=!0,t.textContent="Testing connection...",t.className="msg";try{const e=await fetch(`${n}/api/health`,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Backend returned ${e.status}`);if((await e.json()).status!=="ok")throw new Error("Backend health check failed");await o({baseUrl:n}),t.textContent="Connected! Redirecting to login...",t.className="msg ok",setTimeout(()=>{window.location.href="login.html"},500)}catch(e){t.textContent=`Connection failed: ${e instanceof Error?e.message:String(e)}`,t.className="msg err",s.disabled=!1}})});
