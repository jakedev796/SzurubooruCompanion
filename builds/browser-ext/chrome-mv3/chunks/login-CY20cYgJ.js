import{l as i,f as d,a as m,s as l}from"./api-Cq_tAyyC.js";document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("username"),a=document.getElementById("password"),t=document.getElementById("login"),e=document.getElementById("msg");a.addEventListener("keypress",n=>{n.key==="Enter"&&t.click()}),t.addEventListener("click",async()=>{const n=r.value.trim(),o=a.value;if(!n||!o){e.textContent="Username and password are required.",e.className="msg err";return}t.disabled=!0,e.textContent="Logging in...",e.className="msg";try{await i(n,o),e.textContent="Fetching preferences...";const s=await d(),c=await m();await l({baseUrl:c.baseUrl}),e.textContent="Login successful! Redirecting...",e.className="msg ok",setTimeout(()=>{window.location.href="popup.html"},500)}catch(s){e.textContent=`Login failed: ${s instanceof Error?s.message:String(s)}`,e.className="msg err",t.disabled=!1}})});
